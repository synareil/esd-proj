<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link href="assets/css/details.css" rel="stylesheet">
</head>

<body>
<div id="nav-placeholder"></div>
    <!-- item scripts -->
    <script>
        (async function() {
            const response = await fetch('./nav.html');
            const data = await response.text();
            document.getElementById('nav-placeholder').innerHTML = data;

            // Get the filename of the current page
            const page = window.location.pathname.split("/").pop().split(".")[0];

            // Get the nav link element that corresponds to the current page
            const link = document.getElementById(page);

            // Add the 'active' class to the nav link
            if (link) link.classList.add("active");
        })();
    </script>

<main id="main">

    <!-- ======= Breadcrumbs ======= -->
    <section id="breadcrumbs" class="breadcrumbs">
        <div class="container">
            <div class="d-flex justify-content-between align-items-center">
                <h2>Name</h2>
                <ol>
                <li><a href="index.html">Home</a></li>
                <li>Item: Name</li>
                </ol>
            </div>
        </div>
    </section><!-- End Breadcrumbs -->

    <!-- ======= Portfolio Details Section ======= -->
    <section id="portfolio-details" class="portfolio-details">
        <div class="container">

            <div class="row gy-4">

                <div class="col-lg-6">
                    <div class="portfolio-details-slider swiper">
                        <div class="swiper-wrapper align-items-center">
                            <div class="swiper-slide">
                                <img id="img" src="./assets/img/littlefuzzyss.jpg" alt="">
                            </div>
                        </div>
                        <div class="swiper-pagination"></div>
                    </div>
                </div>

                <div class="col-lg-6">
                    <div class="portfolio-info">
                    <h3>Product information</h3>
                    <ul>
                        <table class="w-100">
                            <tr>
                                <th>Price</th>
                                <td id="price"></td>
                            </tr>
                            <tr>
                                <th>Name</th>
                                <td id="name"></td>
                            </tr>
                            <tr>
                                <th>Description</th>
                                <td id="description"></td>
                            </tr>
                            <tr>
                                <th>Stock Available</th>
                                <td id="stock"></td>
                            </tr>
                            <tr>
                                <th>Quantity</th>
                                <td id="qty"></td>
                            </tr>
                        </table>
                    </ul    >
                    <button class="btn btn-primary w-100" >Add To Cart</button>
                    </div>
                </div>
            </div>

        </div>
        </section><!-- End Portfolio Details Section -->

    </main><!-- End #main -->
</body>

<script>
    document.addEventListener("DOMContentLoaded", (event) => {
        var data = [
        {
            "itemID": 1,
            "name": "item1",
            "description": "This is item #1",
            "qty": 3,
            "price": 100.00,
            "salesPrice": 10.00,
            "img": "assets/img/littlefuzzyss.jpg"
        },
        {
            "itemID": 2,
            "name": "item2",
            "description": "This is item #2",
            "qty": 3,
            "price": 100.00,
            "salesPrice": 0.00,
            "img": "assets/img/littlefuzzyss.jpg"
        },
        {
            "itemID": 3,
            "name": "item3",
            "description": "This is item #3",
            "qty": 3,
            "price": 100.00,
            "salesPrice": 0.00,
            "img": "assets/img/littlefuzzyss.jpg"
        },
        {
            "itemID": 4,
            "name": "item4",
            "description": "This is item #4",
            "qty": 3,
            "price": 100.00,
            "salesPrice": 0.00,
            "img": "assets/img/littlefuzzyss.jpg"
        },
        {
            "itemID": 4,
            "name": "item4",
            "description": "This is item #4",
            "qty": 3,
            "price": 100.00,
            "salesPrice": 0.00,
            "img": "assets/img/littlefuzzyss.jpg"
        },
        {
            "itemID": 4,
            "name": "item4",
            "description": "This is item #4",
            "qty": 3,
            "price": 100.00,
            "salesPrice": 0.00,
            "img": "assets/img/littlefuzzyss.jpg"
        },
        {
            "itemID": 4,
            "name": "item4",
            "description": "This is item #4",
            "qty": 3,
            "price": 100.00,
            "salesPrice": 0.00,
            "img": "assets/img/littlefuzzyss.jpg"
        },
        {
            "itemID": 4,
            "name": "item4",
            "description": "This is item #4",
            "qty": 3,
            "price": 100.00,
            "salesPrice": 0.00,
            "img": "assets/img/littlefuzzyss.jpg"
        },
        {
            "itemID": 4,
            "name": "item4",
            "description": "This is item #4",
            "qty": 3,
            "price": 100.00,
            "salesPrice": 0.00,
            "img": "assets/img/littlefuzzyss.jpg"
        },
        {
            "itemID": 4,
            "name": "item4",
            "description": "This is item #4",
            "qty": 3,
            "price": 100.00,
            "salesPrice": 0.00,
            "img": "assets/img/littlefuzzyss.jpg"
        },
        {
            "itemID": 4,
            "name": "item4",
            "description": "This is item #4",
            "qty": 3,
            "price": 100.00,
            "salesPrice": 0.00,
            "img": "assets/img/littlefuzzyss.jpg"
        },
        {
            "itemID": 4,
            "name": "item4",
            "description": "This is item #4",
            "qty": 3,
            "price": 100.00,
            "salesPrice": 0.00,
            "img": "assets/img/littlefuzzyss.jpg"
        },
        {
            "itemID": 4,
            "name": "item4",
            "description": "This is item #4",
            "qty": 3,
            "price": 100.00,
            "salesPrice": 0.00,
            "img": "assets/img/littlefuzzyss.jpg"
        },
        {
            "itemID": 4,
            "name": "item4",
            "description": "This is item #4",
            "qty": 3,
            "price": 100.00,
            "salesPrice": 10,
            "img": "assets/img/littlefuzzyss.jpg"
        }
    ]
        // make api call to get data by specific id instead of this
        for (each of data) {
            if (each.itemID == localStorage.itemIdx) {
                item = each
                break
            }
        }

        // ADD TO CART BUTTON
        var addToCartButton = document.getElementById('addtocart');
        // Add the event listener
        addToCartButton.addEventListener('click', function() {
            // Call your function here
            alert("add to cart");

        });

        // show item image
        image = document.getElementById('img')
        image.src = item.img

        // show item name
        name = document.getElementById('name')
        name.innerHTML = item.name
        
        // show item desc
        desc = document.getElementById('desc')
        desc.innerHTML = item.description
            
        // show item stcok
        stock = document.getElementById('stock')
        stock.innerHTML = item.qty

        // show item price
        stock = document.getElementById('price')

        if (item.salesPrice != 0) {
                var sale = (item.price - item.salesPrice).toFixed(2)
                stock.innerHTML = `<s class="text-left">$${item.price.toFixed(2)}</s>
                                <span class="text-right" style="color: red;">$${sale}</span>`
            } else {
                stock.innerHTML = `$${item.price}`
            }
        })
</script>
